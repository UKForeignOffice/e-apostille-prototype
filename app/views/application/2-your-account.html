{% extends "layout.html" %}

{% block pageTitle %}
  Applications
{% endblock %}

{% block beforeContent %}
{% include "includes/my-account-nav.html" %}
{% endblock %}

{% block content %}

<h1 class="govuk-heading-xl">
  Applications
</h1>

<div class="govuk-!-margin-bottom-4">
{{ govukButton({
  text: "New application",
  href: "/application/1-choose-a-service",
  isStartButton: true
}) }}
</div>

<form class="govuk-!-margin-bottom-5" style="position: relative;">
  <input
    class="govuk-input"
    id="search"
    style="width: 320px"
    name="search"
    type="search"
    spellcheck="false"
    aria-describedby="search-hint"
    autocomplete="email"
    placeholder="Search by reference"
  >
  <input
    class="submit-button"
    type="button"
    value="Search"
    style="position: absolute;"
  >
</form>

{{ govukTable({
  firstCellIsHeader: false,
  head: [
    {
      html: '<a href="#">Submitted</a>'
    },
    {
      html: '<a href="#">Application reference</a>'
    },
    {
      html: '<a href="#">Your reference</a>'
    },
    {
      html: '<a href="#">Cost</a>'
    },
    {
      html: 'Status'
    },
    {
      html: ''
    }
  ],
  rows: [
  [
    {
      text: "02-03-2022"
    },
    {
      html: 'A-D-22-0205-0343-5BEC'
    },
    {
      text: "220302 JS"
    },
    {
      text: "£90"
    },
    {
      html: '<strong class="govuk-tag">Completed</strong><br>1 of 4 PDFs<br>rejected'
    },
    {
      html: '<button id="A-D-21-0205-0343-5BEC-completed" class="govuk-button govuk-button--secondary govuk-!-margin-bottom-0" data-module="govuk-button">View</button>'
    }
  ],
  [
    {
      text: "12-02-2022"
    },
    {
      html: 'A-D-22-0212-5678-EFDH'
    },
    {
      text: "220212/HJS"
    },
    {
      text: "£60"
    },
    {
      html: '<strong class="govuk-tag">Completed</strong>'
    },
    {
      html: '<button id="A-D-21-0212-5678-EFDH" class="govuk-button govuk-button--secondary govuk-!-margin-bottom-0" data-module="govuk-button">View</button>'
    }
  ],
  [
    {
      text: "10-02-2022"
    },
    {
      html: 'A-C-22-0212-9012-JKLM'
    },
    {
      text: "220210/JSmith"
    },
    {
      text: "£35"
    },
    {
      html: '<strong class="govuk-tag">Despatched</strong><br><a href="/application/page-not-created">Tracking ref:<br>1234567890</a>'
    },
    {
      html: '<button id="A-C-22-0205-0343-5BEC" class="govuk-button govuk-button--secondary govuk-!-margin-bottom-0" data-module="govuk-button">View</button>'
    }
  ]
  ]
}) }}
<p class="govuk-body">
  Showing 1 – 3 of 3 applications submitted in the last 60 days
</p>

<!-- Code to route user to correct application based on 'view' button press - hacky!! -->
<script type="text/javascript">
document.getElementById('A-D-21-0205-0343-5BEC-completed').addEventListener('click', () => {
  window.location.href = '/application/A-D-21-0205-0343-5BEC-completed';
});

document.getElementById('A-D-21-0212-5678-EFDH').addEventListener('click', () => {
  window.location.href = '/application/A-D-21-0212-5678-EFDH';
});

document.getElementById('A-C-22-0205-0343-5BEC').addEventListener('click', () => {
  //do nothing
});
</script>

{% endblock %}
